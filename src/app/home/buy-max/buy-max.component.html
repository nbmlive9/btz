<div class="container-fluid mb-5" >

  <!-- Back Link -->
  <div class="container p-1 mt-3">
    <h6 class="fw-bold back-link" onclick="history.back()" style="cursor: pointer;">
      <i class="fa fa-chevron-left"></i> Back
    </h6>
  </div>

  <!-- Title -->
  <h5 class="fw-bold text-dark mb-4 text-center">Bitraze Max</h5>
   <div *ngIf="successMessage" class="alert alert-success text-center">
            {{ successMessage }}
          </div>
          <div *ngIf="errorMessage" class="alert alert-danger text-center">
            {{ errorMessage }}
          </div>
<!-- Error Toast -->
<div class="position-fixed bottom-0 end-0 p-3">
  <div class="toast align-items-center text-bg-danger border-0" role="alert" [ngClass]="{'show': showError, 'hide': !showError}" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body fw-bold">
        {{ errorMessage }}
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" (click)="showError=false"></button>
    </div>
  </div>
</div>


  <!-- Price Cards -->
<div class="row text-center g-3">
  <div class="col-12 col-md-4" *ngFor="let p of pack">
    <div class="price-card shadow-lg p-4 rounded-4 text-white"
         [ngClass]="getPackageClass(p)">
      <h5 class="fw-bold">${{ p.amount }}</h5>
      <button class="btn btn-light fw-bold mt-2 px-4 rounded-pill"
              data-bs-toggle="modal"
              data-bs-target="#customModal"
              (click)="openModal(p)">
        BUY
      </button>
    </div>
  </div>
</div>


</div>

<!-- Deposit Transactions -->
<main class="container my-4 mb-5 pb-5">
  <div class="fw-bold mb-3">Purchase Transactions</div>
  <!-- <div class="vstack gap-3" *ngFor="let row of adata"> -->
    <div class="vstack gap-3" *ngFor="let row of adata?.slice().reverse(); else noTransactions">

    <div class="txn-card d-flex align-items-center p-3 rounded-3 shadow-sm  border-4" *ngIf="row.ptype=='max'">
      <div class="txn-icon me-3 fs-3 text-success"><i class="bi bi-person-circle"></i></div>
      <div class="flex-grow-1">
        <div class="d-flex justify-content-between">
          <div class="txn-title fw-semibold" >MAX Package</div>

          <div class="txn-amt text-success fw-bold">{{row.amount | currency:'USD':true:'1.0-2' }}</div>
        </div>
        <div class="d-flex justify-content-between align-items-center small text-muted">
          <div class="txn-sub">{{row.cdate | date:'dd/MM/YYYY'}}</div>
          <span class="badge bg-success rounded-pill">Success</span>
        </div>
      </div>
    </div>
  </div>
      <ng-template #noTransactions>
      <div class="text-center text-muted py-4">
        No transactions yet.
      </div>
    </ng-template>
</main>

<!-- Bootstrap Modal -->
<div class="modal fade" id="customModal" tabindex="-1" aria-labelledby="customModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content rounded-4 shadow-lg border-0">

      <!-- Modal Header -->
      <div class="modal-header border-0 bg-gradient-blue text-white rounded-top-4">
        <h5 class="modal-title fw-bold" id="customModalLabel">Bitraze Max</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <form [formGroup]="form">
          <!-- Amount Input -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Enter Amount</label>
            <input type="hidden" formControlName="regid" />

                 <input type="number" id="amountInput" class="form-control form-control-lg rounded-3" placeholder="$10" readonly>
          </div>

          <!-- Balance Info -->
          <h6 class="text-primary fw-bold">
            Available Balance:
            <span class="text-success">{{pdata.actwallet | currency:'USD':true:'1.0-2'}}</span>
          </h6>

          <!-- Submit -->
          <div class="text-center mt-4">
            <button type="button" class="btn btn-success rounded-pill px-4"
                    (click)="submitAction()" data-bs-dismiss="modal">
              Confirm
            </button>
          </div>
        </form>

      </div>

    </div>
  </div>
</div>

<div class="mt-5">
  <app-footer></app-footer>
</div>